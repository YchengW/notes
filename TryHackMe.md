## LAN
LAN = Local Area Network
>Star Topology（星型拓扑）
&nbsp;&nbsp;&nbsp;&nbsp;主要方式。
&nbsp;&nbsp;&nbsp;&nbsp;**特点**：最贵，可扩展性好。网络规模越大，需要维护的越多，来保证网络功能正常如果中心节点挂了，那其他设备就无法收发信息，不过这些中心节点的设备很稳健，不容易挂。 

>Bus Topology（总线拓扑）
&nbsp;&nbsp;&nbsp;&nbsp;依赖于一根总线来传输数据，类似树干。
&nbsp;&nbsp;&nbsp;&nbsp;**特点**：所有数据通过总线来传输，导致如果出现拥塞很难排查是哪一个设备出现问题。成本低廉，但是如果总线出故障了几乎没有冗余机制，如果总线断裂其他设备将无法收发信息。

>Ring Topology（环形拓扑）
&nbsp;&nbsp;&nbsp;&nbsp;计算机等设备直接相连形成环形拓扑，意味着所需的布线更少，对专用硬件的依赖也低于星型拓扑。
&nbsp;&nbsp;&nbsp;&nbsp;环形拓扑里的设备只会转发其他设备发来的数据（和自己的数据不会一起发送），自己需要发数据时先发自己的数据再转发收到的数据。
&nbsp;&nbsp;&nbsp;&nbsp;**特点**：故障排查相对容易。并不是很有效，因为数据需要在网络中转发很多次才能到达目标设备。但是如果出现故障比如线缆断裂或者设备损坏，整个网络将无法工作。

**交换机**
&emsp;&emsp;交换机用来聚合多个其他设备，把不同的设备连接到交换机的端口，因为网络中有许多设备需要连接，可提供4、8、16、32、64个端口来连接大量设备。

&emsp;&emsp;交换机比低端设备（集线器/中继器）效率更高。集线器收到数据包时会转发到每个端口，交换机会跟踪哪个设备连接到哪个端口，收到数据会直接送到目标端口。

&emsp;&emsp;交换机和路由器可以相互连接，通过多条传输路径，提高网络的冗余度（可靠性）。如果一条路径出现故障，可以使用另一条路径，虽然传输时间更长，但不会造成停机。

**路由器**
&emsp;&emsp;把网络和网络连接起来，它通过路由来在网络之间传递数据。路由指的是数据在网络中传输的过程。路由涉及在网络之间创建路径，以便数据能够成功传输。设备之间多条路径连接的时候，路由非常有用。

**子网划分**
&emsp;&emsp;网络需要知道把信息发送到哪个设备。子网划分是通过划分网络中可容纳的主机数量来实现的。


&emsp;&emsp;IP地址由四个部分组成，被称为octec。子网掩码也一样，范围从0-255。子网使用IP地址的方式有三种
- 识别网络地址
- 识别主机地址
- 识别默认网关

&emsp;&emsp;子网划分能把两个主机设备相互隔离，同时又都能连接到互联网。  
例如：一家咖啡馆有两个网络：
&nbsp;1. 给员工、收音机和其他设备使用
&nbsp;2. 另一个给公众用作热点

**网络地址**
&emsp;&emsp;这个地址标识实际网络的起始地址，用来标识网络的存在。例如：192.168.1.100 的设备位于 192.168.1.0 的网络中。

**主机地址**
&emsp;&emsp;这个地址用来标识在子网中的设备，例如：子网中的一台设备的IP地址为：192.168.1.1

**默认网关**
&emsp;&emsp;默认网关地址是一个特殊地址，可以向 ***其他网络*** 发送信息。任何需要发送到其他网络的数据都会发送到这个设备。主机地址通常为第一个或最后一个(.1 或 .254)

## ARP协议
&emsp;&emsp;ARP(Address Resolution Protocol)协议是一种在网络上标识自己的协议。它允许设备将IP地址和MAC地址关联起来。每台设备都会维护一个日志[<u>和其他设备关联的MAC地址</u>]。  
&emsp;&emsp;当设备需要通信时，它会在整个网络发一个广播，设备会通过ARP协议来找具体的MAC地址。
&emsp;&emsp;网络中每个设备都有一个ledger，被称为缓存，用来标识网络上其他设备。为了把(<u>IP地址</u> 和 <u>MAC地址</u>)映射在一起，ARP协议会发送两种类型的消息：
1. ARP Request
2. ARP Reply

```
    Device -- Broadcast --> All Device in the Network
    Specific Device -- Reply Message --> Device
```

&emsp;&emsp;然后初始设备会记住这个IP地址并把它存到缓存(ARP条目)。<u>MAC地址</u>用作物理标识符，<u>IP地址</u>用作逻辑地址。
    
## DHCP协议
&emsp;&emsp;DHCP(Dynamic Host Configuration Protocol)。IP地址可以<u>手动分配（手动输入）</u>也可以<u>自动分配（通过DHCP服务器）</u>。
&emsp;&emsp;当一个设备连接到网络的时候，如果没有手动分配IP地址，它会发出请求，查看网络上是否有DHCP服务器，然后DHCP服务器会回复一个设备可用的IP地址。第二步，设备会发送一个确认需要这个IP地址的回复。最后，DHCP服务器发送一个回复，确认IP地址分配完毕，然后设备可以开始使用这个IP地址。

## OSI Model
&emsp;&emsp;OSI(Open System Interconnection) Model
在每一层传输时都会传入特定的数据，被称为封装(encapsulation)
- Physical 物理层
- Data Link 数据链路层
- Network 网络层
- Transport 传输层
- Session 会话层
- Presentation 表示层
- Application 应用层
---
>**第七层——应用层**
&emsp;&emsp;**主要功能：图形化用户界面**你的网络通信门户。这一层定义了控制用户交互数据的协议和规则。例如<u>DNS协议(Domain Name System)</u>：用来把网站地址转换成IP地址的协议。
&emsp;&emsp;**协议：** HTTP协议、DNS协议、FTP协议


>**第六层——表示层**
&emsp;&emsp;**主要功能：翻译**这一层像一个翻译机一样，尽管双方使用的软件不同，通过这一层的翻译也能让双方进行数据交换。表示层会把数据转换成一种格式，让传送方和接收方都能解读。确保双方客户端不同也能持续通信。
&emsp;&emsp;**协议：** HTTPS协议
&emsp;&emsp;一些安全方面比如<u>数据封装</u>通过HTTPS来保护网站，也在表示层。

>**第五层——会话层**
&emsp;&emsp;**主要功能：建立连接，管理数据流**主要用来保证数据交换的专用通信频道。在数据交换以前，会话层会同步两台电脑，保证都可通信。当同步开始之后，会话层会把数据分成很多块，被称为数据包。这些提供了一个很关键的好处：如果连接掉了，只有未传输的数据包需要被重传，而不是整个数据集。就像游戏一样，你重连回游戏之后会从检查点重生，而不是从头开始。
&emsp;&emsp;很重要的一点是会话是独一无二的，数据不会同时从多个会话传输出去；会话只会存在于已建立的连接之间。

>**第四层——传输层**
&emsp;&emsp;**主要功能：** 通过TCP和UDP协议来传输数据。 TCP协议：优先保证可靠性和保证交付。建立专用链接，保证信道通畅。会校验数据包是否按预期接受和重组，速度较慢。适合对数据完整性和准确性要求高的应用。 UDP协议：是TCP的简单代替方案，它放弃了错误校验和保证送达等功能，数据包直接发送，无需确认接收。 所以UDP比TCP快，不需要专用的连接，适合不稳定的场合。
**协议：** TCP协议、UDP协议
 
>**第三层——网络层**
&emsp;&emsp;**主要功能：** 把碎片化的数据包拼成原样。这一层依靠IP地址进行设备识别和通信。能够用IP地址路由数据包的网络设备（例如路由器）根据在OSI模型的操作级别被归为第三层设备。
**协议：** 路由协议 开放最短路径优先协议OSPF(Open Shortest Path First) 路由信息协议RIP(Routing Information Protocol)

>**第二层——数据链路层**
&emsp;&emsp;**主要功能：** 提供了物理层的寻址、帧结构封装，并进行错误检测和控制。每个计算机都被分配唯一的MAC地址。这一层通过MAC地址来转发数据包。这一层会将数据封装成适合物理介质传输的格式。

>**第一层——物理层**
&emsp;&emsp;**主要功能：** 网络硬件的物理组件，以二进制数字系统（0和1）相互传输数据。

## 数据包 & 数据帧
**数据包(Packets):**寄的物品，包含IP地址；<br>
**数据帧(Frame):**寄物品的包装，包含物理地址和差错检验。

### TCP数据包头内包含的字段
- 源端口(Source Port)
- 目的地端口(Destination Port)
- 源IP地址(Source IP)
- 目的IP地址(Destination IP)
- 序列号(Sequence Number)
- 确认号(Acknowledgment Number)
- 校验和(checkcum)
- 数据(data)
- 标记(Flags):SYN, ACK, FIN, RST, PSH, URG




